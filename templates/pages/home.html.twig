{% extends 'base.html.twig' %}

{% block title %}KocinaSpeed - Recettes Rapides et Délicieuses | Cuisine Française Facile{% endblock %}

{% block meta_description %}Découvrez KocinaSpeed, votre plateforme de recettes françaises rapides et délicieuses. Plus de 100 recettes faciles avec photos, vidéos YouTube et avis communauté. Desserts, plats principaux, apéritifs - tout pour cuisiner vite et bien !{% endblock %}

{% block meta_keywords %}recettes rapides, cuisine française, recettes faciles, KocinaSpeed, desserts rapides, plats principaux, apéritifs, recettes avec photos, vidéos cuisine, recettes maison, cuisine simple{% endblock %}

{% block og_title %}KocinaSpeed - Les Meilleures Recettes Rapides de France{% endblock %}
{% block og_description %}Plateforme #1 des recettes françaises rapides et délicieuses. Découvrez des centaines de recettes faciles avec photos HD, vidéos et conseils de notre communauté passionnée.{% endblock %}

{% block schema_type %}WebSite{% endblock %}

{% block recipe_count %}{{ allRecipes|length }}{% endblock %}

{% block additional_schema %}
<script type="application/ld+json">
{
	"@context": "https://schema.org",
	"@type": "CollectionPage",
	"name": "Recettes KocinaSpeed - Collection Complète",
	"description": "Découvrez notre collection complète de recettes françaises rapides et délicieuses",
	"url": "{{ app.request.schemeAndHttpHost }}{{ path('app_home') }}",
	"mainEntity": {
		"@type": "ItemList",
		"name": "Dernières Recettes KocinaSpeed",
		"numberOfItems": {{ recipes|length }},
		"itemListElement": [
			{% for recipe in recipes %}
			{
				"@type": "Recipe",
				"position": {{ loop.index }},
				"name": "{{ recipe.name }}",
				"description": "{{ recipe.description|slice(0, 100) }}{{ recipe.description|length > 100 ? '...' : '' }}",
				"image": "{% if recipe.images|length > 0 %}{{ app.request.schemeAndHttpHost }}{{ asset('uploads/recipes/' ~ recipe.images|first.imagePath) }}{% endif %}",
				"url": "{{ app.request.schemeAndHttpHost }}{{ path('app_recipe_details', {slug: recipe.slug}) }}",
				"author": {
					"@type": "Organization",
					"name": "KocinaSpeed"
				},
				"aggregateRating": {% if recipe.reviews|length > 0 %}{
					"@type": "AggregateRating",
					"ratingValue": "{{ recipe.rating ? recipe.rating : 4.5 }}",
					"reviewCount": "{{ recipe.reviews|length }}"
				}{% else %}null{% endif %},
				"prepTime": "PT{{ recipe.cookingTime ? recipe.cookingTime : 15 }}M",
				"recipeCategory": "{{ recipe.category }}",
				"recipeCuisine": "Française"
			}{% if not loop.last %},{% endif %}
			{% endfor %}
		]
	},
	"about": {
		"@type": "Thing",
		"name": "Cuisine Française Rapide",
		"description": "Recettes traditionnelles françaises adaptées pour une préparation rapide"
	},
	"keywords": "recettes rapides, cuisine française, recettes faciles, desserts, plats principaux, apéritifs"
}
</script>

<script type="application/ld+json">
{
	"@context": "https://schema.org",
	"@type": "FAQPage", 
	"mainEntity": [
		{
			"@type": "Question",
			"name": "Qu'est-ce que KocinaSpeed ?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "KocinaSpeed est une plateforme de recettes françaises rapides et délicieuses. Nous proposons des centaines de recettes faciles à préparer avec photos, vidéos et avis de notre communauté."
			}
		},
		{
			"@type": "Question", 
			"name": "Combien de temps faut-il pour préparer vos recettes ?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Nos recettes sont spécialement conçues pour être rapides. La plupart peuvent être préparées en 15 à 30 minutes, parfaites pour les repas de tous les jours."
			}
		},
		{
			"@type": "Question",
			"name": "Puis-je laisser des avis sur les recettes ?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Oui ! Vous pouvez laisser des avis, noter les recettes de 1 à 5 étoiles et même partager vos photos de réalisations. Notre communauté adore partager ses expériences culinaires."
			}
		},
		{
			"@type": "Question",
			"name": "Y a-t-il des vidéos pour apprendre à cuisiner ?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Oui, certaines de nos recettes incluent des vidéos détaillées sur YouTube pour vous guider étape par étape dans la préparation."
			}
		}
	]
}
</script>
{% endblock %}

{% block body %}
	<div class="uk-container">
		<div class="uk-border-rounded-large uk-background-top-center uk-background-cover uk-background-norepeat uk-light uk-inline uk-overflow-hidden uk-width-1-1" style="background-image: url('{{ asset('img/backgrounds/background4.jpg') }}');">
			<div class="uk-position-cover uk-header-overlay"></div>
			<div class="uk-position-relative" data-uk-grid>
				<div class="uk-width-1-2@m uk-flex uk-flex-middle">
					<div class="uk-padding-large uk-padding-remove-right">
						<h1 class="uk-heading-small uk-margin-remove-top" style="font-family: 'Dancing Script', cursive; font-size: 3rem; color: #470A1B;">
							Découvrez nos recettes
						</h1>
					</div>
				</div>
				<div class="uk-width-expand@m"></div>
			</div>
		</div>
	</div>

	<!-- Section de présentation avec une vignette (card) et un titre personnalisé -->
	<div class="uk-section uk-section-muted uk-padding uk-position-relative">
		<div class="uk-container uk-text-center">
			<div
				class="uk-card uk-card-default uk-card-body uk-border-rounded uk-box-shadow-large uk-padding-large">
				<!-- Animation d'image ajoutée sous la carte -->
				<div class="uk-animation-kenburns uk-inline-clip uk-transition-toggle uk-margin-large-top" tabindex="0">
					<img src="{{ asset('img/logos/logo3.png') }}" alt="logo kocinaspeed" class="uk-border-rounded-large" style="max-width: 100%; height: auto;">
				</div>

				<!-- Titre personnalisé avec une couleur différente -->
				<h2 class="uk-heading-line uk-text-bold uk-animation-slide-top-small" style="font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: #ff7043;">
					<span>Bienvenue sur
						<strong>Kocinaspeed</strong>
					</span>
				</h2>

				<p class="uk-text-lead uk-animation-fade uk-margin-medium-top" style="font-family: 'Roboto', sans-serif; color: #4e342e;">
					À titre amateur, notre site a pour objectif de vous offrir des
					<strong>recettes rapides</strong>,
					<strong>faciles à préparer</strong>, et surtout
					<strong>délicieuses</strong>.
				</p>

				<p class="uk-text-lead uk-animation-fade" style="font-family: 'Roboto', sans-serif; color: #4e342e;">
					Que vous soyez pressé ou que vous cherchiez une idée pour épater vos invités,
					<strong>Kocinaspeed</strong>
					a une solution adaptée à vos
					<em>envies culinaires</em>.
				</p>

				<!-- Liste des avantages avec une animation -->
				<ul class="uk-list uk-list-large uk-list-bullet uk-text-left uk-margin-large-top uk-animation-slide-bottom-small" style="color: #4e342e; font-family: 'Poppins', sans-serif;">
					<li>L'intelligence artificielle à votre service !</li>
					<li>Explorez nos différentes catégories de recettes</li>
					<li>Trouvez rapidement vos recettes grâce à la barre de recherche</li>
					<li>Utilisez notre nouveau Chatbot, il vous guidera !</li>
					<li>Laissez vos avis et partagez vos réalisations et même vos photos avec d'autres passionnés</li>
					<li>Des mises à jour régulières avec de nouvelles recettes pour vous inspirer</li>
					<li>Des courtes vidéos de réalisation sur certaines recettes</li>
					<li>N'hésitez pas à nous contacter pour des suggestions ou partenariat !</li>
				</ul>
			</div>
		</div>
	</div>

	<!-- Section affichant les recettes -->
	<div class="uk-section uk-section-default" style="background: linear-gradient(135deg, #f3e5f5, #e8f5e9);">
		<div class="uk-container">
			<div
				data-uk-grid>
				<!-- Colonne de gauche pour les catégories -->
				<div class="uk-width-1-4@m sticky-container">
					<div data-uk-sticky="offset: 100; bottom: true; media: @m;" class="uk-border-rounded uk-background-cover" style="background: linear-gradient(135deg, rgba(225, 190, 231, 0.8), rgba(200, 230, 201, 0.8)); padding: 15px; font-family: 'Poppins', sans-serif;">
						<h2 class="uk-text-bold uk-light">Liste de nos recettes par catégories</h2>
						<ul class="uk-nav-default uk-nav-parent-icon uk-nav-filter uk-margin-medium-top" data-uk-nav>
							{% for category_key, category_label in constant('App\\Entity\\Recipe::CATEGORIES') %}
								<li class="uk-parent">
									<a href="#" class="uk-light">{{ category_label }}</a>
									<ul class="uk-nav-sub">
										{% set category_recipes = allRecipes|filter(recipe => recipe.category == category_key) %}
										{% if category_recipes|length > 0 %}
											{% for recipe in category_recipes %}
												<li>
													<a href="{{ path('app_recipe_details', { slug: recipe.slug }) }}" class="uk-light">{{ recipe.name }}</a>
												</li>
											{% endfor %}
										{% else %}
											<li>
												<span class="uk-light">Aucune recette disponible</span>
											</li>
										{% endif %}
									</ul>
								</li>
							{% endfor %}
						</ul>
					</div>
				</div>

				<!-- Colonne de droite pour la liste des recettes -->
				<div class="uk-width-expand@m">
					<div
						data-uk-grid>
						<!-- Barre de recherche avec un dégradé subtil -->
						<div class="uk-width-expand@m uk-margin-bottom">
							<form class="uk-search uk-search-default uk-width-1-1" action="{{ path('app_recipe_search') }}" method="get" style="background: linear-gradient(135deg, #f3e5f5, #e8f5e9); border-radius: 10px; font-family: 'Poppins', sans-serif;">
								<span data-uk-search-icon></span>
								<input class="uk-search-input uk-text-small uk-border-rounded uk-form-large" type="search" placeholder="Recherche par nom de recette..." name="query" style="background: transparent; border: none; color: #4e342e;">
							</form>
						</div>
					</div>

					<!-- Titre pour la section des recettes -->
					<h2 class="uk-heading-line uk-text-center uk-margin-medium-bottom" style="font-family: 'Dancing Script', cursive; color: #4e342e;">
						<span>Nos dernières recettes postées</span>
					</h2>

					<!-- Affichage des 6 dernières recettes avec design amélioré -->
					<div class="uk-child-width-1-1 uk-child-width-1-2@s uk-child-width-1-3@l uk-grid-match" data-uk-grid>
						{% for recipe in recipes %}
							<div>
								<div class="uk-card uk-card-hover uk-border-rounded-large uk-overflow-hidden uk-box-shadow-large" 
									 style="background: linear-gradient(135deg, #ffffff, #f8f9fa); transition: all 0.3s ease; border: 1px solid rgba(255, 112, 67, 0.1);">
									
									<!-- Image de la recette - Plus grande et plus attractive -->
									<div class="uk-card-media-top uk-cover-container uk-overflow-hidden" style="height: 280px; position: relative;">
										{% if recipe.images|length > 0 %}
											<img class="lazy-load" 
												 src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3C/svg%3E"
												 data-src="{{ asset('uploads/recipes/' ~ recipe.images|first.imagePath) }}" 
												 alt="{{ recipe.name }}" 
												 loading="lazy"
												 style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;">
										{% else %}
											<img class="lazy-load" 
												 src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='280'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3C/svg%3E"
												 data-src="{{ asset('img/default-image.jpg') }}" 
												 alt="{{ recipe.name }}" 
												 loading="lazy"
												 style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;">
										{% endif %}
										
										<!-- Badge "Nouveau" pour les dernières recettes -->
										<div class="uk-position-top-left uk-margin-small-top uk-margin-small-left">
											<span class="uk-badge uk-text-uppercase" 
												  style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
												Nouveau
											</span>
										</div>
										
										<!-- Overlay avec catégorie -->
										<div class="uk-position-top-right uk-margin-small-top uk-margin-small-right">
											<span class="uk-badge uk-text-uppercase" 
												  style="background: linear-gradient(135deg, #ff7043, #ff5722); color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
												{{ constant('App\\Entity\\Recipe::CATEGORIES')[recipe.category] ?? recipe.category }}
											</span>
										</div>
										
										<!-- Overlay gradient pour le texte -->
										<div class="uk-position-bottom uk-background-gradient" style="background: linear-gradient(transparent, rgba(0,0,0,0.3)); height: 60px;"></div>
									</div>
									
									<!-- Contenu de la card -->
									<div class="uk-card-body uk-padding" style="padding: 20px;">
										<h3 class="uk-card-title uk-margin-remove-bottom uk-text-truncate" 
											style="font-family: 'Poppins', sans-serif; color: #2c3e50; font-size: 1.1rem; font-weight: 600; line-height: 1.3;">
											{{ recipe.name }}
										</h3>
										
										{% if recipe.description %}
											<p class="uk-text-small uk-text-muted uk-margin-small-top uk-margin-remove-bottom" 
											   style="line-height: 1.4; max-height: 2.8em; overflow: hidden; color: #6c757d;">
												{{ recipe.description|striptags|slice(0, 80) }}{{ recipe.description|striptags|length > 80 ? '...' : '' }}
											</p>
										{% endif %}
										
										<!-- Informations supplémentaires -->
										<div class="uk-margin-small-top uk-flex uk-flex-between uk-flex-middle">
											{% if recipe.cookingTime %}
												<div class="uk-flex uk-flex-middle">
													<span uk-icon="icon: clock; ratio: 0.8" style="color: #ff7043;"></span>
													<span class="uk-text-small uk-margin-small-left" style="color: #6c757d; font-weight: 500;">
														{{ recipe.cookingTime }} min
													</span>
												</div>
											{% endif %}
											
											{% if recipe.rating %}
												<div class="uk-flex uk-flex-middle">
													<span uk-icon="icon: star; ratio: 0.8" style="color: #ffc107;"></span>
													<span class="uk-text-small uk-margin-small-left" style="color: #6c757d; font-weight: 500;">
														{{ recipe.rating|number_format(1) }}
													</span>
												</div>
											{% endif %}
										</div>
									</div>
									
									<!-- Lien invisible pour toute la card -->
									<a href="{{ path('app_recipe_details', { slug: recipe.slug }) }}" class="uk-position-cover" aria-label="Voir la recette {{ recipe.name }}"></a>
								</div>
							</div>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}