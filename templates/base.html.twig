<!DOCTYPE html>
<html lang="fr" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			{% block title %}Kocinaspeed
			{% endblock %}
		</title>
		<link rel="icon" href="{{ asset('img/logos/logo.png') }}" type="image/png">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.7.3/dist/css/uikit.min.css"/>
		<link rel="stylesheet" href="{{ asset('css/main.css') }}">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Leckerli+One&display=swap" rel="stylesheet">
		<script src="{{ asset('js/uikit.js') }}" defer></script>
		<script src="{{ asset('js/lazy-loading.js') }}" defer></script>
		
		<!-- Styles personnalis√©s pour le chatbot avec effet n√©on -->
		<style>
			/* Styles pour le bouton du chatbot */
			iframe[src*="chatbase.co"] {
				transition: all 0.3s ease !important;
			}
			
			/* Animation d'entr√©e pour le chatbot */
			@keyframes neonGlow {
				0%, 100% { 
					box-shadow: 0 0 5px #ff7043, 0 0 10px #ff7043, 0 0 15px #ff7043, 0 0 20px #ff7043;
				}
				50% { 
					box-shadow: 0 0 10px #ff7043, 0 0 20px #ff7043, 0 0 30px #ff7043, 0 0 40px #ff7043;
				}
			}
			
			@keyframes pulse {
				0% { transform: scale(1); }
				50% { transform: scale(1.05); }
				100% { transform: scale(1); }
			}
			
			/* Styles pour personnaliser le widget chatbase */
			div[id*="chatbase-bubble"], 
			div[class*="chatbase"], 
			button[class*="chatbase"],
			.chatbase-chat-bubble {
				border-radius: 25px !important;
				background: linear-gradient(145deg, #ff7043, #ff5722) !important;
				box-shadow: 0 0 20px rgba(255, 112, 67, 0.6) !important;
				animation: neonGlow 2s ease-in-out infinite alternate, pulse 3s ease-in-out infinite !important;
				border: 2px solid rgba(255, 112, 67, 0.8) !important;
				transition: all 0.3s ease !important;
			}
			
			/* Hover effect pour le bouton du chatbot */
			div[id*="chatbase-bubble"]:hover, 
			div[class*="chatbase"]:hover,
			button[class*="chatbase"]:hover,
			.chatbase-chat-bubble:hover {
				transform: scale(1.1) !important;
				box-shadow: 0 0 30px rgba(255, 112, 67, 0.9) !important;
				animation: neonGlow 1s ease-in-out infinite alternate !important;
			}
			
			/* Styles pour la fen√™tre de chat */
			div[id*="chatbase-chat"], 
			.chatbase-chat-window {
				border-radius: 20px !important;
				box-shadow: 0 0 40px rgba(255, 112, 67, 0.4) !important;
				border: 2px solid rgba(255, 112, 67, 0.3) !important;
				background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.95)) !important;
				backdrop-filter: blur(10px) !important;
			}
			
			/* Header de la fen√™tre de chat */
			div[id*="chatbase-chat"] header,
			.chatbase-chat-header {
				background: linear-gradient(145deg, #ff7043, #ff5722) !important;
				border-radius: 18px 18px 0 0 !important;
				box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.2) !important;
			}
			
			/* Effets pour les messages */
			div[id*="chatbase-chat"] .message,
			.chatbase-message {
				border-radius: 15px !important;
				margin: 8px 0 !important;
				transition: all 0.3s ease !important;
			}
			
			/* Messages de l'utilisateur */
			div[id*="chatbase-chat"] .message.user,
			.chatbase-message.user {
				background: linear-gradient(145deg, #ff7043, #ff5722) !important;
				color: white !important;
				box-shadow: 0 2px 10px rgba(255, 112, 67, 0.3) !important;
			}
			
			/* Messages du bot */
			div[id*="chatbase-chat"] .message.bot,
			.chatbase-message.bot {
				background: linear-gradient(145deg, #f8f9fa, #e9ecef) !important;
				border: 1px solid rgba(255, 112, 67, 0.2) !important;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
			}
			
			/* Input du chat */
			div[id*="chatbase-chat"] input,
			div[id*="chatbase-chat"] textarea,
			.chatbase-input {
				border-radius: 20px !important;
				border: 2px solid rgba(255, 112, 67, 0.3) !important;
				transition: all 0.3s ease !important;
			}
			
			div[id*="chatbase-chat"] input:focus,
			div[id*="chatbase-chat"] textarea:focus,
			.chatbase-input:focus {
				border-color: #ff7043 !important;
				box-shadow: 0 0 15px rgba(255, 112, 67, 0.3) !important;
			}
			
			/* Bouton d'envoi */
			div[id*="chatbase-chat"] button[type="submit"],
			.chatbase-send-button {
				background: linear-gradient(145deg, #ff7043, #ff5722) !important;
				border: none !important;
				border-radius: 20px !important;
				box-shadow: 0 4px 15px rgba(255, 112, 67, 0.4) !important;
				transition: all 0.3s ease !important;
			}
			
			div[id*="chatbase-chat"] button[type="submit"]:hover,
			.chatbase-send-button:hover {
				transform: translateY(-2px) !important;
				box-shadow: 0 6px 20px rgba(255, 112, 67, 0.6) !important;
			}
			
			/* Animation de typing */
			.chatbase-typing-indicator {
				background: linear-gradient(145deg, #ff7043, #ff5722) !important;
				border-radius: 15px !important;
				box-shadow: 0 0 15px rgba(255, 112, 67, 0.3) !important;
			}
			
			/* Masquer le branding Chatbase */
			div[id*="chatbase"] a[href*="chatbase.co"],
			div[class*="chatbase"] a[href*="chatbase.co"],
			.chatbase-powered-by,
			div[id*="chatbase-chat"] footer,
			div[id*="chatbase-chat"] .footer,
			div[id*="chatbase-chat"] [class*="powered"],
			div[id*="chatbase-chat"] [id*="powered"],
			div[class*="chatbase"] footer,
			div[class*="chatbase"] .footer,
			div[class*="chatbase"] [class*="powered"],
			div[class*="chatbase"] [id*="powered"],
			a[href*="chatbase.co"]:not(.kocinaspeed-keep) {
				display: none !important;
				opacity: 0 !important;
				visibility: hidden !important;
				height: 0 !important;
				overflow: hidden !important;
			}
			
			/* Masquer sp√©cifiquement le texte "Powered by" */
			div[id*="chatbase-chat"] *:contains("Powered by"),
			div[class*="chatbase"] *:contains("Powered by"),
			div[id*="chatbase-chat"] *:contains("chatbase"),
			div[class*="chatbase"] *:contains("chatbase") {
				display: none !important;
			}
			
			/* Style pour masquer le footer du chat */
			div[id*="chatbase-chat"] > div:last-child,
			div[class*="chatbase-chat-window"] > div:last-child {
				border-bottom: none !important;
			}
			
			/* Responsive design */
			@media (max-width: 768px) {
				div[id*="chatbase-bubble"], 
				div[class*="chatbase"], 
				button[class*="chatbase"] {
					bottom: 20px !important;
					right: 20px !important;
				}
				
				div[id*="chatbase-chat"] {
					width: 90vw !important;
					height: 70vh !important;
					bottom: 100px !important;
					right: 5vw !important;
				}
			}
		</style>
	</head>
	<body>
		<!-- Section Navbar -->
		<nav class="uk-navbar-container uk-letter-spacing-small">
			<div class="uk-container">
				<div
					class="uk-navbar" data-uk-navbar>
					<!-- Navbar Left (Logo et Navigation) -->
					<div class="uk-navbar-left">
						<a class="uk-navbar-item uk-logo" href="{{ path('app_home') }}">
							Kocinaspeed
						</a>
						<!-- Menu principal visible sur desktop -->
						<ul class="uk-navbar-nav uk-visible@m uk-margin-large-left">
							<li class="uk-active">
								<a href="{{ path('app_home') }}">Accueil</a>
							</li>
							<li>
								<a href="{{ path('app_recipe_index') }}">Recettes</a>
							</li>
							<li>
								<a href="{{ path('app_contact') }}">Contact</a>
							</li>
							<li>
								<a href="#video-modal" uk-toggle>Pr√©sentation vid√©o de Kocinaspeed</a>
							</li>
						</ul>
					</div>

					<!-- Navbar Right (Logo YouTube d√©plac√© √† droite en mode desktop) -->
					<div class="uk-navbar-right">
						<div class="uk-visible@m">
							<a href="https://www.youtube.com/channel/UCkMEwuAnNMG21xfh_rmjkFg" target="_blank">
								<img src="{{ asset('img/logoyoutube.jpg') }}" alt="YouTube Kocinaspeed" width="200" height="200">
							</a>
						</div>
						<!-- Menu Burger pour mobile -->
						<a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas" data-uk-toggle>
							<span data-uk-navbar-toggle-icon></span>
						</a>
					</div>
				</div>
			</div>
		</nav>
		<!-- Section Podcast compacte -->
		<div class="uk-section uk-section-xsmall uk-padding-small">
			<div class="uk-container">
				<div class="uk-card uk-card-small uk-card-hover uk-border-rounded uk-padding-small uk-flex uk-flex-middle uk-flex-center@s uk-flex-wrap uk-flex-nowrap@m" 
					 style="background: linear-gradient(45deg, rgba(255, 112, 67, 0.1), rgba(232, 245, 233, 0.1)); border: 1px solid rgba(255, 112, 67, 0.2);">
					
					<!-- Micro anim√© compact -->
					<div class="uk-flex uk-flex-middle uk-margin-small-right">
						<div class="uk-animation-fade uk-transition-toggle" tabindex="0">
							<svg width="40" height="40" viewbox="0 0 100 100" style="color: #ff7043;" class="uk-animation-stroke">
								<circle cx="50" cy="50" r="40" fill="none" stroke="currentColor" stroke-width="3" opacity="0.3"/>
								<path d="M50,25 L50,55 M45,55 L55,55 M50,55 C45,55 42,58 42,62 C42,66 45,70 50,70 C55,70 58,66 58,62 C58,58 55,55 50,55" stroke="currentColor" fill="none" stroke-width="2.5"/>
								<circle cx="50" cy="37" r="10" fill="currentColor"/>
							</svg>
						</div>
					</div>

					<!-- Contenu compact -->
					<div class="uk-flex uk-flex-column uk-flex-middle uk-text-center uk-text-left@m uk-flex-1">
						<h3 class="uk-text-bold uk-margin-remove uk-text-small uk-animation-slide-left" style="font-family: 'Poppins', sans-serif; color: #ff7043; font-size: 0.9rem;">
							üéôÔ∏è D√©couvrez KocinaSpeed en podcast !
						</h3>
						<div class="uk-margin-xsmall-top">
							<audio controls preload="none" class="uk-width-small uk-border-rounded" style="height: 30px; background: rgba(255, 112, 67, 0.05);">
								<source src="{{ asset('audio/kocinaspeed-podcast.mp3') }}" type="audio/mpeg">
								Votre navigateur ne supporte pas l'audio.
							</audio>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Section principale -->
		{% block body %}{% endblock %}

		<!-- Section Footer -->
		<footer class="uk-section uk-section-secondary uk-padding-large uk-light">
			<div class="uk-container">
				<div
					class="uk-grid-large uk-child-width-1-3@m uk-flex-middle" data-uk-grid>
					<!-- Colonne 1 : Logo et pr√©sentation -->
					<div class="uk-text-center uk-text-left@m">
						<a href="{{ path('app_home') }}" class="uk-logo">
							<img src="{{ asset('img/logos/logo.png') }}" alt="Logo" width="90" height="90" class="uk-border-circle">
						</a>
						<p class="uk-margin-remove-top">KocinaSpeed - Recettes rapides et d√©licieuses pour les passionn√©s de cuisine.</p>
					</div>

					<!-- Colonne 2 : Liens de navigation rapides -->
					<div class="uk-text-center uk-text-left@m">
						<h4 class="uk-heading-line uk-text-bold">
							<span>Navigation</span>
						</h4>
						<ul class="uk-list uk-list-divider">
							<li>
								<a href="{{ path('app_home') }}" class="uk-link-text">Accueil</a>
							</li>
							<li>
								<a href="{{ path('app_recipe_index') }}" class="uk-link-text">Recettes</a>
							</li>
							<li>
								<a href="{{ path('app_contact') }}" class="uk-link-text">Contact</a>
							</li>
							<li>
								<a href="{{ path('app_mentions_legales') }}" class="uk-link-text">Mentions L√©gales</a>
							</li>
						</ul>
					</div>

					<!-- Colonne 3 : R√©seaux sociaux et contact -->
					<div class="uk-text-center uk-flex uk-flex-column uk-flex-middle">
						<h4 class="uk-heading-line uk-text-bold">
							<span>Suivez-nous</span>
						</h4>
						<div class="uk-margin-small">
							<a href="https://www.youtube.com/channel/UCkMEwuAnNMG21xfh_rmjkFg" target="_blank" class="uk-icon-button" uk-icon="youtube" style="color: #FF0000;"></a>
							<a href="#" target="_blank" class="uk-icon-button" uk-icon="facebook" style="color: #4267B2;"></a>
							<a href="#" target="_blank" class="uk-icon-button" uk-icon="instagram" style="color: #E1306C;"></a>
						</div>
						<p class="uk-margin-small-top uk-text-small">Contactez-nous :
							<br><a href="mailto:support@kocinaspeed.fr" class="uk-link-text">support@kocinaspeed.fr</a>
						</p>
					</div>
				</div>

				<!-- Ligne de s√©paration et copyright -->
				<hr class="uk-divider-icon">
				<div class="uk-text-center uk-text-small">
					<p>¬© 2024 KocinaSpeed. R√©alis√© par
						<a href="https://krismos.fr" target="_blank" class="uk-link-reset">Krismos64 (Christophe Mostefaoui)</a>. Tous droits r√©serv√©s.</p>
				</div>
			</div>
		</footer>

		<!-- Menu Offcanvas pour mobile -->
		<div id="offcanvas" data-uk-offcanvas="flip: true; overlay: true">
			<div class="uk-offcanvas-bar">
				<a class="uk-logo" href="{{ path('app_home') }}">Kocinaspeed</a>
				<button class="uk-offcanvas-close" type="button" data-uk-close="ratio: 1.2"></button>
				<!-- Menu principal Offcanvas -->
				<ul class="uk-nav uk-nav-primary uk-nav-offcanvas uk-margin-medium-top uk-text-center">
					<li class="uk-active">
						<a href="{{ path('app_home') }}">Accueil</a>
					</li>
					<li>
						<a href="{{ path('app_recipe_index') }}">Recettes</a>
					</li>
					<li>
						<a href="{{ path('app_contact') }}">Contact</a>
					</li>
					<li>
						<a href="#video-modal" uk-toggle>Pr√©sentation vid√©o de Kocinaspeed</a>
					</li>
				</ul>

				<!-- Bouton de Connexion ou Espace Admin dans le Offcanvas (Icone) -->
				<div class="uk-margin-medium-top uk-text-center">
					{% if is_granted('IS_AUTHENTICATED_FULLY') %}
						{% if is_granted('ROLE_ADMIN') %}
							<a class="uk-icon-link" uk-icon="cog" href="{{ path('app_admin') }}"></a>
						{% else %}
							<a class="uk-icon-link" uk-icon="user" href="{{ path('app_profile') }}"></a>
						{% endif %}
					{% else %}
						<a class="uk-icon-link" uk-icon="sign-in" href="{{ path('app_login') }}"></a>
					{% endif %}
				</div>

				<!-- Logo YouTube dans le Offcanvas pour mobile -->
				<div class="uk-margin-medium-top uk-text-center">
					<a href="https://www.youtube.com/channel/UCkMEwuAnNMG21xfh_rmjkFg" target="_blank">
						<img src="{{ asset('img/logoyoutube.jpg') }}" alt="YouTube Kocinaspeed" width="200" height="200">
					</a>
				</div>

				<!-- Logo dans le Offcanvas -->
				<div class="uk-margin-medium-top uk-text-center">
					<a href="{{ path('app_home') }}">
						<img src="{{ asset('img/logos/logo.png') }}" alt="Logo" width="150" height="150" class="uk-margin-small-top">
					</a>
				</div>
			</div>
		</div>

		<!-- Modal Video -->
		<div id="video-modal" uk-modal>
			<div class="uk-modal-dialog uk-modal-body uk-padding-remove">
				<button class="uk-modal-close-default" type="button" uk-close></button>
				<div class="uk-responsive-width">
					<iframe src="https://www.youtube.com/embed/sDklFFp7uuk" width="100%" height="315" frameborder="0" allowfullscreen uk-video></iframe>
				</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/uikit@3.7.3/dist/js/uikit.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/uikit@3.7.3/dist/js/uikit-icons.min.js"></script>
		<script src="{{ asset('js/uikit.js') }}" defer></script>
		{% block javascripts %}{% endblock %}

		<!-- Script pour la bulle de chat Chatbase avec am√©liorations -->
		<script>
			window.embeddedChatbotConfig = {
				chatbotId: "h7h4r15Lk4FkE9FhbINev",
				domain: "www.chatbase.co"
			}
			
			// Am√©lioration du chatbot avec animations et personnalisations
			document.addEventListener('DOMContentLoaded', function() {
				// Fonction pour supprimer le branding Chatbase
				function removeChatbaseBranding() {
					try {
						// Supprimer les liens vers chatbase.co
						const chatbaseLinks = document.querySelectorAll('a[href*="chatbase.co"]');
						chatbaseLinks.forEach(link => {
							if (!link.classList.contains('kocinaspeed-keep')) {
								link.style.display = 'none';
								try {
									if (link.parentNode) {
										link.parentNode.removeChild(link);
									}
								} catch (e) {
									// √âl√©ment d√©j√† supprim√©
								}
							}
						});
						
						// Supprimer les √©l√©ments contenant "Powered by" de mani√®re plus s√©curis√©e
						const elementsToRemove = [];
						const allElements = document.querySelectorAll('div, span, p, a');
						
						allElements.forEach(element => {
							if (element.textContent && element.textContent.trim().includes('Powered by')) {
								elementsToRemove.push(element);
							}
							if (element.textContent && element.textContent.toLowerCase().trim().includes('chatbase')) {
								const parent = element.parentNode;
								if (parent && parent.tagName === 'A' && parent.href && parent.href.includes('chatbase.co')) {
									elementsToRemove.push(parent);
								}
							}
						});
						
						// Supprimer les √©l√©ments collect√©s
						elementsToRemove.forEach(element => {
							try {
								element.style.display = 'none';
								if (element.parentNode) {
									element.parentNode.removeChild(element);
								}
							} catch (e) {
								// √âl√©ment d√©j√† supprim√© ou inaccessible
							}
						});
						
					} catch (error) {
						// Erreur silencieuse pour √©viter de casser l'interface
						console.log('Erreur lors de la suppression du branding:', error);
					}
				}
				
				// Attendre que le chatbot soit charg√©
				setTimeout(function() {
					// Supprimer le branding imm√©diatement
					removeChatbaseBranding();
					
					// R√©p√©ter la suppression toutes les secondes pendant les 10 premi√®res secondes
					let attempts = 0;
					const brandingInterval = setInterval(function() {
						removeChatbaseBranding();
						attempts++;
						if (attempts >= 10) {
							clearInterval(brandingInterval);
						}
					}, 1000);
					
					// Observer les changements dans le DOM pour supprimer le branding dynamiquement
					if (typeof MutationObserver !== 'undefined') {
						const observer = new MutationObserver(function(mutations) {
							mutations.forEach(function(mutation) {
								if (mutation.addedNodes.length) {
									setTimeout(removeChatbaseBranding, 100);
								}
							});
						});
						
						// V√©rifier que l'√©l√©ment existe avant d'observer
						const targetNode = document.body || document.documentElement;
						if (targetNode && typeof targetNode.nodeType !== 'undefined') {
							try {
								observer.observe(targetNode, {
									childList: true,
									subtree: true
								});
							} catch (error) {
								console.log('Observer non disponible:', error);
							}
						}
					}
					
					// Rechercher et personnaliser le bouton du chatbot
					const chatbotElements = document.querySelectorAll('[id*="chatbase"], [class*="chatbase"]');
					chatbotElements.forEach(function(element) {
						// Ajouter une classe personnalis√©e
						element.classList.add('kocinaspeed-chatbot');
						
						// Effet de scintillement au survol
						element.addEventListener('mouseenter', function() {
							element.style.animation = 'neonGlow 0.5s ease-in-out infinite alternate, pulse 1s ease-in-out infinite';
						});
						
						element.addEventListener('mouseleave', function() {
							element.style.animation = 'neonGlow 2s ease-in-out infinite alternate, pulse 3s ease-in-out infinite';
						});
					});
					
					// Ajouter un effet de particules autour du bouton (optionnel)
					const chatButton = document.querySelector('[id*="chatbase-bubble"]');
					if (chatButton) {
						// Animation d'introduction
						chatButton.style.opacity = '0';
						chatButton.style.transform = 'scale(0.5)';
						
						setTimeout(function() {
							chatButton.style.transition = 'all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
							chatButton.style.opacity = '1';
							chatButton.style.transform = 'scale(1)';
						}, 1000);
						
						// Ajouter un tooltip personnalis√©
						const tooltip = document.createElement('div');
						tooltip.innerHTML = 'üí¨ Posez-moi une question !';
						tooltip.style.cssText = `
							position: absolute;
							bottom: 70px;
							right: -10px;
							background: linear-gradient(145deg, #ff7043, #ff5722);
							color: white;
							padding: 8px 15px;
							border-radius: 20px;
							font-size: 12px;
							font-family: 'Poppins', sans-serif;
							box-shadow: 0 4px 15px rgba(255, 112, 67, 0.4);
							opacity: 0;
							transform: translateY(10px);
							transition: all 0.3s ease;
							pointer-events: none;
							z-index: 10000;
							white-space: nowrap;
						`;
						
						chatButton.appendChild(tooltip);
						
						// Animation du tooltip
						setTimeout(function() {
							tooltip.style.opacity = '1';
							tooltip.style.transform = 'translateY(0)';
							
							setTimeout(function() {
								tooltip.style.opacity = '0';
								tooltip.style.transform = 'translateY(-10px)';
							}, 3000);
						}, 2000);
					}
				}, 2000);
			});
		</script>
		<script src="https://www.chatbase.co/embed.min.js" chatbotid="h7h4r15Lk4FkE9FhbINev" domain="www.chatbase.co" defer></script>
	</body>
</html>
